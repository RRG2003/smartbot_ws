controller_manager:
  ros__parameters:
    update_rate: 50

    diff_drive_controller:
      type: diff_drive_controller/DiffDriveController

    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    arm_controller:
      type: joint_trajectory_controller/JointTrajectoryController

    gripper_controller:
      type: position_controllers/JointGroupPositionController


# ============================================
# Diff Drive Controller
# ============================================
diff_drive_controller:
  ros__parameters:
    left_wheel_names: ["left_wheel_joint"]
    right_wheel_names: ["right_wheel_joint"]

    wheel_separation: 0.45
    wheel_radius: 0.15

    odom_frame_id: odom
    base_frame_id: base_footprint
    pose_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.01]
    twist_covariance_diagonal: [0.001, 0.001, 0.001, 0.001, 0.001, 0.01]

    publish_rate: 50.0
    enable_odom_tf: true
    
    linear.x.has_velocity_limits: true
    linear.x.has_acceleration_limits: true
    linear.x.max_velocity: 1.0
    linear.x.min_velocity: -1.0
    linear.x.max_acceleration: 1.0

    angular.z.has_velocity_limits: true
    angular.z.has_acceleration_limits: true
    angular.z.max_velocity: 2.0
    angular.z.min_velocity: -2.0
    angular.z.max_acceleration: 1.5

    cmd_vel_timeout: 0.5
    publish_limited_velocity: true
    velocity_rolling_window_size: 10
    preserve_turning_radius: true


# ============================================
# Joint State Broadcaster
# ============================================
joint_state_broadcaster:
  ros__parameters:
    joints:
      - left_wheel_joint
      - right_wheel_joint
      - shoulder_joint
      - elbow_joint
      - wrist_joint
      - left_finger_joint
      - right_finger_joint


# ============================================
# Arm Controller
# ============================================
arm_controller:
  ros__parameters:
    joints:
      - shoulder_joint
      - elbow_joint
      - wrist_joint

    command_interfaces:
      - position

    state_interfaces:
      - position
      - velocity

    state_publish_rate: 50.0
    action_monitor_rate: 20.0


# ============================================
# Gripper Controller
# ============================================
gripper_controller:
  ros__parameters:
    joints:
      - left_finger_joint
      - right_finger_joint

    command_interfaces:
      - position

    state_interfaces:
      - position
      - velocity


      
# controller_manager:
#   ros__parameters:
#     update_rate: 50  # Hz
#     use_sim_time: true

#     # Joint State Broadcaster
#     joint_state_broadcaster:
#       type: joint_state_broadcaster/JointStateBroadcaster

#     # Arm Controller
#     arm_controller:
#       type: joint_trajectory_controller/JointTrajectoryController

#     # Gripper Controller
#     gripper_controller:
#       type: position_controllers/JointGroupPositionController

# # ========================================
# # Joint State Broadcaster Configuration
# # ========================================
# joint_state_broadcaster:
#   ros__parameters:
#     joints:
#       - shoulder_joint
#       - elbow_joint
#       - wrist_joint
#       - left_finger_joint
#       - right_finger_joint
#     interfaces:
#       - position
#       - velocity

# # ========================================
# # Arm Controller Configuration
# # ========================================
# arm_controller:
#   ros__parameters:
#     joints:
#       - shoulder_joint
#       - elbow_joint
#       - wrist_joint
    
#     command_interfaces:
#       - position
    
#     state_interfaces:
#       - position
#       - velocity
    
#     state_publish_rate: 50.0
#     action_monitor_rate: 20.0
    
#     allow_partial_joints_goal: false
#     open_loop_control: false
#     allow_integration_in_goal_trajectories: true
    
#     constraints:
#       stopped_velocity_tolerance: 0.01
#       goal_time: 0.0
#       shoulder_joint:
#         trajectory: 0.1
#         goal: 0.05
#       elbow_joint:
#         trajectory: 0.1
#         goal: 0.05
#       wrist_joint:
#         trajectory: 0.1
#         goal: 0.05

#     gains:
#       shoulder_joint:
#         p: 100.0
#         i: 0.01
#         d: 10.0
#         i_clamp: 1.0
#       elbow_joint:
#         p: 100.0
#         i: 0.01
#         d: 10.0
#         i_clamp: 1.0
#       wrist_joint:
#         p: 50.0
#         i: 0.01
#         d: 5.0
#         i_clamp: 1.0

# # ========================================
# # Gripper Controller Configuration
# # ========================================
# gripper_controller:
#   ros__parameters:
#     joints:
#       - left_finger_joint
#       - right_finger_joint
    
#     command_interfaces:
#       - position
    
#     state_interfaces:
#       - position
#       - velocity
    
#     state_publish_rate: 50.0